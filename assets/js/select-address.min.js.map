{"version":3,"sources":["select-address.js"],"names":["$","SelectAddress","this","$document","document","prototype","init","_initFieldValues","on","proxy","onChangeBillingSelect","onChangeShippingSelect","event","_updateFieldValues","target","type","$selectAddress","$form","closest","address","fabfw_select_address","addresses","val","each","key","value","$field","find","length","is","append","trigger","jQuery"],"mappings":"CAQA,SAAUA,GACN,aAQA,SAASC,IACLC,KAAKC,UAAYH,EAAEI,UASvBH,EAAcI,UAAUC,KAAO,WAC3BJ,KAAKK,mBAELL,KAAKC,UAAUK,GAAG,eAAgB,oCAAqCR,EAAES,MAAMP,KAAKQ,sBAAuBR,OAC3GA,KAAKC,UAAUK,GAAG,eAAgB,qCAAsCR,EAAES,MAAMP,KAAKS,uBAAwBT,QAUjHD,EAAcI,UAAUK,sBAAwB,SAASE,GACrDV,KAAKW,mBAAmB,UAAWb,EAAEY,EAAME,UAU/Cb,EAAcI,UAAUM,uBAAyB,SAASC,GACtDV,KAAKW,mBAAmB,WAAYb,EAAEY,EAAME,UAShDb,EAAcI,UAAUE,iBAAmB,WACvCL,KAAKW,mBAAmB,UAAWb,EAAE,8CACrCE,KAAKW,mBAAmB,WAAYb,EAAE,gDAW1CC,EAAcI,UAAUQ,mBAAqB,SAASE,EAAMC,GACxD,IAAIC,EAAkBD,EAAeE,QAAQ,QACzCC,EAAkBC,qBAAqBC,UAAUL,EAAeM,OAE/DH,GAILnB,EAAEuB,KAAKJ,EAAS,SAASK,EAAKC,GAC1B,IAAIC,EAAST,EAAMU,KAAK,IAAMZ,EAAO,IAAMS,GAEtCE,EAAOE,QAAUF,EAAOJ,QAAUG,IAKnCC,EAAOG,GAAG,YAAcH,EAAOC,KAAK,iBAAmBF,EAAQ,MAAMG,QACrEF,EAAOI,OAAO,kBAAoBL,EAAQ,KAAOA,EAAQ,aAG7DC,EAAOJ,IAAIG,GAGXC,EAAOK,QAAQ,eAIvB,IAAI9B,GAAgBK,OA9FxB,CAgGG0B","file":"select-address.min.js","sourcesContent":["/* global fabfw_select_address */\n/**\n * Select address script on checkout page.\n * \n * @since 1.0.0\n * @param {jQuery} $\n * @returns {undefined}\n */\n(function($) {\n    \"use strict\";\n    \n    /**\n     * Select address class.\n     * \n     * @since 1.0.0\n     * @returns {SelectAddress}\n     */\n    function SelectAddress() {\n        this.$document = $(document);\n    }\n    \n    /**\n     * Initialize.\n     * \n     * @since 1.0.0\n     * @returns {undefined}\n     */\n    SelectAddress.prototype.init = function() {\n        this._initFieldValues();\n        \n        this.$document.on('change.fabfw', '[name=\"fabfw_address_billing_id\"]', $.proxy(this.onChangeBillingSelect, this));\n        this.$document.on('change.fabfw', '[name=\"fabfw_address_shipping_id\"]', $.proxy(this.onChangeShippingSelect, this));\n    };\n    \n    /**\n     * Change event handler for select billing address field.\n     * \n     * @since 1.0.0\n     * @param {Event} event\n     * @returns {undefined}\n     */\n    SelectAddress.prototype.onChangeBillingSelect = function(event) {\n        this._updateFieldValues('billing', $(event.target));\n    };\n    \n    /**\n     * Change event handler for select shipping address field.\n     * \n     * @since 1.0.0\n     * @param {Event} event\n     * @returns {undefined}\n     */\n    SelectAddress.prototype.onChangeShippingSelect = function(event) {\n        this._updateFieldValues('shipping', $(event.target));\n    };\n    \n    /**\n     * Initialize address field values on load.\n     * \n     * @since 1.0.0\n     * @returns {undefined}\n     */\n    SelectAddress.prototype._initFieldValues = function() {        \n        this._updateFieldValues('billing', $('[name=\"fabfw_address_billing_id\"]:checked'));\n        this._updateFieldValues('shipping', $('[name=\"fabfw_address_shipping_id\"]:checked'));\n    };\n    \n    /**\n     * Update address field values.\n     * \n     * @since 1.0.0\n     * @param {string} type Address type (billing|shipping).\n     * @param {jQuery} $selectAddress\n     * @returns {undefined}\n     */\n    SelectAddress.prototype._updateFieldValues = function(type, $selectAddress) {\n        var $form           = $selectAddress.closest('form');\n        var address         = fabfw_select_address.addresses[$selectAddress.val()];\n        \n        if (!address) {\n            return;\n        }\n        \n        $.each(address, function(key, value) {\n            var $field = $form.find('#' + type + '_' + key);\n            \n            if (!$field.length || $field.val() === value) {\n                return;\n            }\n            \n            // Create the select option if it does not exists yet.\n            if ($field.is('select') && !$field.find('option[value=\"' + value + '\"]').length) {\n                $field.append('<option value=\"' + value + '\">' + value + '</option>');\n            }\n            \n            $field.val(value);\n            // `onchange` only fires when the user types into the input and then the input loses focus.\n            // https://stackoverflow.com/a/3179392\n            $field.trigger('change');\n        });\n    };\n\n    new SelectAddress().init();\n    \n})(jQuery);"]}