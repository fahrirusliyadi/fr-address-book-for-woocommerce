!function(o){"use strict";function i(){this.$window=o(window),this.$document=o(document)}i.prototype.init=function(){this._initFieldValues(),this.$document.on("change.fabfw",'.fabfw-select-address-container [name="fabfw_address_billing_id"]',o.proxy(this.onChangeBillingSelect,this)),this.$document.on("change.fabfw",'.fabfw-select-address-container [name="fabfw_address_shipping_id"]',o.proxy(this.onChangeShippingSelect,this)),this.$document.find(".fabfw-select-address-container .fabfw-edit").on("click.fabfw",o.proxy(this.onClickEditAddress,this)),this.$document.on("checkout_error",o.proxy(this.onCheckoutError,this))},i.prototype.onChangeBillingSelect=function(i){var e=o(i.target);this._initFieldsVisibility("billing",e),this._updateFieldValues("billing",e)},i.prototype.onChangeShippingSelect=function(i){var e=o(i.target);this._initFieldsVisibility("shipping",e),this._updateFieldValues("shipping",e)},i.prototype.onClickEditAddress=function(i){var e=o(i.target).closest("#fabfw_address_billing_id_field").length?"billing":"shipping";i.preventDefault(),this._toggleFields(e)},i.prototype.onCheckoutError=function(i){["billing","shipping"].forEach(function(i){var e=o(".woocommerce-"+i+"-fields__field-wrapper");e.find(".woocommerce-invalid").length&&e.removeClass("hidden")})},i.prototype._initFieldValues=function(){var i=o('[name="fabfw_address_billing_id"]:checked'),e=o('[name="fabfw_address_shipping_id"]:checked');this._initFieldsVisibility("billing",i),this._initFieldsVisibility("shipping",e),this._updateFieldValues("billing",i),this._updateFieldValues("shipping",e)},i.prototype._initFieldsVisibility=function(i,e){if(e.length){var t=o(".woocommerce-"+i+"-fields__field-wrapper"),n=e.val(),s=e.closest(".fabfw-select-address-container").find('[for="fabfw_address_'+i+'_id_new"] .button');t.toggleClass("hidden","new"!==n),s.toggleClass("disabled","new"===n),t.find(":input:visible").first().focus()}},i.prototype._toggleFields=function(i){var e=o(".woocommerce-"+i+"-fields__field-wrapper");e.hasClass("hidden")?(e.removeClass("hidden"),e.find(":input:visible").first().focus()):e.addClass("hidden")},i.prototype._updateFieldValues=function(n,i){var s=i.closest("form"),e=fabfw_select_address.addresses[i.val()];e&&(o.each(e,function(i,e){var t=s.find("#"+n+"_"+i);t.length&&t.val()!==e&&(t.is("select")&&!t.find('option[value="'+e+'"]').length&&t.append('<option value="'+e+'">'+e+"</option>"),t.val(e),t.trigger("change"))}),s.trigger("update"))},(new i).init()}(jQuery);
//# sourceMappingURL=select-address.min.js.map
