!function(o){"use strict";function e(){this.$window=o(window),this.$document=o(document)}e.prototype.init=function(){this._initFieldValues(),this.$document.on("change.fabfw",'.fabfw-select-address-container [name="fabfw_address_billing_id"]',o.proxy(this.onChangeBillingSelect,this)),this.$document.on("change.fabfw",'.fabfw-select-address-container [name="fabfw_address_shipping_id"]',o.proxy(this.onChangeShippingSelect,this)),this.$document.find(".fabfw-select-address-container .fabfw-edit").on("click.fabfw",o.proxy(this.onClickEditAddress,this)),this.$document.on("checkout_error",o.proxy(this.onCheckoutError,this))},e.prototype.onChangeBillingSelect=function(e){var i=o(e.target);this._toggleFields("billing",i),this._updateFieldValues("billing",i)},e.prototype.onChangeShippingSelect=function(e){var i=o(e.target);this._toggleFields("shipping",i),this._updateFieldValues("shipping",i)},e.prototype.onClickEditAddress=function(e){var i=o(e.target).closest("#fabfw_address_billing_id_field").length?"billing":"shipping";e.preventDefault(),this._showFields(i)},e.prototype.onCheckoutError=function(e){["billing","shipping"].forEach(function(e){var i=o(".woocommerce-"+e+"-fields__field-wrapper");i.find(".woocommerce-invalid").length&&i.removeClass("hidden")})},e.prototype._initFieldValues=function(){var e=o('[name="fabfw_address_billing_id"]:checked'),i=o('[name="fabfw_address_shipping_id"]:checked');this._toggleFields("billing",e),this._toggleFields("shipping",i),this._updateFieldValues("billing",e),this._updateFieldValues("shipping",i)},e.prototype._toggleFields=function(e,i){if(i.length){var t=i.val(),n=i.closest(".fabfw-select-address-container").find('[for="fabfw_address_'+e+'_id_new"] .button');o(".woocommerce-"+e+"-fields__field-wrapper").toggleClass("hidden","new"!==t),n.toggleClass("disabled","new"===t)}},e.prototype._showFields=function(e){var i=o(".woocommerce-"+e+"-fields__field-wrapper");i.removeClass("hidden"),i.find(":input:visible").first().focus()},e.prototype._updateFieldValues=function(n,e){var s=e.closest("form"),i=fabfw_select_address.addresses[e.val()];i&&(o.each(i,function(e,i){var t=s.find("#"+n+"_"+e);t.length&&t.val()!==i&&(t.is("select")&&!t.find('option[value="'+i+'"]').length&&t.append('<option value="'+i+'">'+i+"</option>"),t.val(i),t.trigger("change"))}),s.trigger("update"))},(new e).init()}(jQuery);
//# sourceMappingURL=select-address.min.js.map
